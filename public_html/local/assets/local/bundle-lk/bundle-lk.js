(()=>{"use strict";const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e&&(e.dataset.timeoutId&&clearTimeout(e.dataset.timeoutId),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.scrollHeight+"px",e.scrollHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.dataset.timeoutId=window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t))},t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(e){e.dataset.timeoutId&&clearTimeout(e.dataset.timeoutId),e.style.removeProperty("display");let s=window.getComputedStyle(e).display;"none"===s&&(s="block"),e.style.display=s;let i=e.scrollHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.scrollHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.dataset.timeoutId=window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)}};class s{constructor(e){this.params={selectors:{accordion:".accordion",item:".accordion-item",trigger:".accordion__trigger",hidden:".accordion-hidden"},classes:{opened:"accordion-hidden_opened",initialItem:""},transitionDuration:300,defaultOpenIndexes:[],oneOpen:!0,hideOnStart:!0,closeOnBlur:!1,onExpand:null,onCollapse:null,_active:!0,...e},this.init()}init(){this.selectors=this.params.selectors,this.classes=this.params.classes,this.openDefaultItemByIndex=this.openDefaultItemByIndex.bind(this),this.openDefaultItemByClass=this.openDefaultItemByClass.bind(this),this.initAccordion()}initAccordion(){this.accordion=document.querySelector(this.selectors.accordion),this.accordion&&(this.hiddenList=this.accordion.querySelectorAll(this.selectors.hidden),this.itemList=this.accordion.querySelectorAll(this.selectors.item),this.params._active=!0,this.attachEvents(),this.params.hideOnStart&&this.hiddenList.forEach((e=>e.style.display="none")),this.checkDefault())}hideAll(){this.itemList.forEach((e=>this.collapse(e)))}openAll(){this.itemList.forEach((e=>this.expand(e)))}attachEvents(){this.accordion.addEventListener("click",this.accordionClickHandler.bind(this)),this.params.closeOnBlur&&document.addEventListener("click",this.documentClick.bind(this)),this.params.oneOpen&&document.addEventListener("accordion.closeAll",this.closeAllHandler.bind(this))}checkDefault(){this.params.defaultOpenIndexes?this.params.defaultOpenIndexes.forEach(this.openDefaultItemByIndex):this.params.classes.initialItem&&this.openDefaultItemByClass()}openDefaultItemByIndex(e){this.expand(this.itemList[e])}openDefaultItemByClass(){const e=Array.prototype.find.call(this.itemList,(e=>e.classList.contains(this.params.classes.initialItem)));e&&this.expand(e)}accordionClickHandler(e){if(this.params._active){let t=e.target.closest(this.selectors.trigger);if(t){let e=t.closest(this.selectors.item);e.classList.contains(this.classes.opened)?this.collapse(e):(this.params.oneOpen&&document.dispatchEvent(new Event("accordion.closeAll")),this.expand(e))}}}documentClick(e){if(this.params._active){if(!e.target.closest(this.selectors.item)){let e=this.accordion.querySelectorAll("."+this.classes.opened);e&&this.collapse(e)}}}expand(e){let s=e.querySelector(this.selectors.hidden);s&&t(s,this.params.transitionDuration),e.classList.add(this.classes.opened),this.params.onExpand&&"function"==typeof this.params.onExpand&&this.params.onExpand(e)}collapse(t){let s=t.querySelector(this.selectors.hidden);s&&e(s,this.params.transitionDuration),t.classList.remove(this.classes.opened),this.params.onCollapse&&"function"==typeof this.params.onCollapse&&this.params.onCollapse(t)}destroy(){this.params._active=!1,this.hiddenList.forEach((e=>e.style.display="")),this.itemList.forEach((e=>e.classList.remove(this.classes.opened)))}closeAllHandler(){this.itemList.forEach((e=>this.collapse(e)))}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".lk-menu")&&new s({selectors:{accordion:".lk-aside",item:".lk-menu",trigger:".lk-menu-top",hidden:".lk-menu-hidden"},classes:{opened:"lk-menu_opened"},defaultOpenIndexes:[0],oneOpen:!1})}))})();